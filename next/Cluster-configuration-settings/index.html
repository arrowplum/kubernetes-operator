<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/kubernetes-operator/blog/rss.xml" title="Aerospike Kubernetes Operator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kubernetes-operator/blog/atom.xml" title="Aerospike Kubernetes Operator Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Aerospike Kubernetes Operator" href="/kubernetes-operator/opensearch.xml"><title data-react-helmet="true">Cluster Configuration Settings | Aerospike Kubernetes Operator</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://aerospike.github.io//kubernetes-operator/next/Cluster-configuration-settings/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Cluster Configuration Settings | Aerospike Kubernetes Operator"><meta data-react-helmet="true" name="description" content="Cluster Configuration Settings"><meta data-react-helmet="true" property="og:description" content="Cluster Configuration Settings"><link data-react-helmet="true" rel="shortcut icon" href="/kubernetes-operator/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://aerospike.github.io//kubernetes-operator/next/Cluster-configuration-settings/"><link data-react-helmet="true" rel="alternate" href="https://aerospike.github.io//kubernetes-operator/next/Cluster-configuration-settings/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://aerospike.github.io//kubernetes-operator/next/Cluster-configuration-settings/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/kubernetes-operator/assets/css/styles.17205d64.css">
<link rel="preload" href="/kubernetes-operator/assets/js/runtime~main.0d978f0c.js" as="script">
<link rel="preload" href="/kubernetes-operator/assets/js/main.0c3a2572.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kubernetes-operator/"><img src="/kubernetes-operator/img/logo.png" alt="Aerospike Kubernetes Operator" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kubernetes-operator/img/logo.png" alt="Aerospike Kubernetes Operator" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Aerospike Kubernetes Operator</b></a><a class="navbar__item navbar__link" href="/kubernetes-operator/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/kubernetes-operator/next/">2.0.0-rc1 ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kubernetes-operator/next/Cluster-configuration-settings/">2.0.0-rc1 ðŸš§</a></li><li><a class="dropdown__link" href="/kubernetes-operator/Cluster-configuration-settings/">1.x.x</a></li></ul></div><a href="https://github.com/aerospike/aerospike-kubernetes-operator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/kubernetes-operator/next/">Aerospike Kubernetes Operator</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/System-Requirements/">System Requirements</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Install-the-Operator-on-Kubernetes/">Install the Operator On Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Create-Aerospike-cluster/">Create Aerospike Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Connect-to-the-Aerospike-cluster/">Connect To The Aerospike Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Troubleshooting/">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Limitations/">Limitations</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Configuration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kubernetes-operator/next/Cluster-configuration-settings/">Cluster Configuration Settings</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Aerospike-configuration-mapping/">Aerospike Configuration Mapping</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Rack-Awareness/">Rack Awareness</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Multiple-Aerospike-clusters/">Multiple Aerospike Clusters</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Monitoring/">Monitoring</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/XDR/">XDR</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Aerospike-access-control/">Aerospike Access Control</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Management</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Aerospike-configuration-change/">Modify Aerospike cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Version-upgrade/">Version Upgrade</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Scaling/">Scaling</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Kubernetes-Secrets/">Kubernetes Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Delete-Aerospike-cluster/">Delete Aerospike Cluster</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Manage-TLS-Certificates/">Manage TLS Certificates</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Storage</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Storage-provisioning/">Storage Provisioning</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Scaling-namespace-storage/">Scaling Namespace Storage</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Storage examples</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Data-in-memory/">Data In Memory</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/Data-on-SSD/">Data On SSD</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/HDD-storage-with-data-in-index/">HDD Storage With Data In Index</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-operator/next/HDD-storage-with-data-in-memory/">HDD Storage With Data In Memory</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Aerospike Kubernetes Operator <b>2.0.0-rc1 ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/kubernetes-operator/Cluster-configuration-settings/">latest version</a></b> (1.x.x).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.0.0-rc1 ðŸš§</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cluster Configuration Settings</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="custom-resource-definition-and-custom-resource"></a>Custom Resource Definition and Custom Resource<a class="hash-link" href="#custom-resource-definition-and-custom-resource" title="Direct link to heading">#</a></h2><p>The Operator <a href="https://github.com/aerospike/aerospike-kubernetes-operator/tree/2.0.0-rc1/deploy/crds/aerospike.com_aerospikeclusters_crd.yaml" target="_blank" rel="noopener noreferrer">CRD</a> specifies the CR that the operator uses. The Aerospike cluster Custom Resource (CR) based on this CRD drives the deployment and management of Aerospike clusters. To create and deploy an Aerospike cluster, create a CR yaml file.</p><p>This custom resource can be edited later on to make any changes to the Aerospike cluster.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="example-cr"></a>Example CR<a class="hash-link" href="#example-cr" title="Direct link to heading">#</a></h2><p>A sample AerospikeCluster resource yaml file that sets up a persistent namespace and an in-memory namespace is below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:white;background-color:#222734"><code class="codeBlockLines_39YC"><span class="token-line" style="color:white"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> asdb.aerospike.com/v1beta1</span></span><span class="token-line" style="color:white"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> AerospikeCluster</span></span><span class="token-line" style="color:white"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerocluster</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:white"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike/aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">enterprise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">5.6.0.7</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">rackConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">namespaces</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> test</span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">racks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># Change to the zone for your k8s cluster.</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">zone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">west1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">a</span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># Change to the zone for your k8s cluster.</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">zone</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">west1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">a</span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">filesystemVolumePolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">cascadeDelete</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">initMethod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> deleteFiles</span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> workdir</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /opt/aerospike</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">persistentVolume</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">storageClass</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ssd</span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">volumeMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Filesystem</span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1Gi</span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ns</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /opt/aerospike/data</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">persistentVolume</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">storageClass</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ssd</span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">volumeMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Filesystem</span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 3Gi</span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /etc/aerospike/secret</span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">podSpec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">multiPodPerHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">sidecars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">prometheus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">exporter</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;aerospike/aerospike-prometheus-exporter:1.1.6&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">9145</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> exporter</span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">aerospikeAccessControl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">users</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> admin</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">roles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> sys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">admin</span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">admin</span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">aerospikeConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">feature-key-file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /etc/aerospike/secret/features.conf</span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">security</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">enable-security</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">network</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">fabric</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3001</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">heartbeat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3002</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">namespaces</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> test</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">memory-size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000000000</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">replication-factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">storage-engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> device</span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> /opt/aerospike/data/test.dat</span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">filesize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2000000000</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">data-in-memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> testMem</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">memory-size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3000000000</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">replication-factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">storage-engine</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> memory</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Other sample Aerospike Cluster CR objects can be found <a href="https://github.com/aerospike/aerospike-kubernetes-operator/tree/2.0.0-rc1/deploy/samples" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><p>The initial part of the CR selects the CRD and the namespace to use for the Aerospike cluster.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:white;background-color:#222734"><code class="codeBlockLines_39YC"><span class="token-line" style="color:white"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> asdb.aerospike.com/v1beta1</span></span><span class="token-line" style="color:white"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> AerospikeCluster</span></span><span class="token-line" style="color:white"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerocluster</span></span><span class="token-line" style="color:white"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="spec"></a>Spec<a class="hash-link" href="#spec" title="Direct link to heading">#</a></h2><p>The spec section provides the configuration for the cluster.</p><p>The fields are described below</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>size <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>Integer</td><td></td><td>The size/number of Aerospike node pods to run for this cluster.</td></tr><tr><td>image <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>Yes</td><td>String</td><td></td><td>The official Aerospike Enterprise Server docker image to use for the node in the cluster.</td></tr><tr><td>podSpec            <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Structure</td><td></td><td>Configures the Kubernetes pod running Aerospike server. See <a href="#pod-spec">Pod Spec</a> for details.</td></tr><tr><td>storage   <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>Required for persistent namespaces and for Aerospike <a href="https://docs.aerospike.com/docs/configuration/index.md?show-removed=1#work-directory" target="_blank" rel="noopener noreferrer">work directory</a>, unless the validation policy skips validating persistence of the work directory. See <a href="#storage">Storage</a> for details.</td></tr><tr><td>aerospikeNetworkPolicy  <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Structure</td><td></td><td>Configures IP and port types used for access. See <a href="#network-policy">Network Policy</a> for details.</td></tr><tr><td>aerospikeAccessControl  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>Required if Aerospike security is enabled. See <a href="#aerospike-access-control">Access Control</a> for  details</td></tr><tr><td>aerospikeConfig       <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>Yes</td><td>configMap</td><td></td><td>A free form configMap confirming to the configuration schema for the deployed Aerospike server version. See <a href="#aerospike-config">Aerospike Config</a> for details.</td></tr><tr><td>rackConfig            <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>Configures the operator to deploy rack aware Aerospike cluster. Pods will be deployed in given racks based on given configuration. See <a href="#rack-config">Rack Config</a> for details.</td></tr><tr><td>operatorClientCert  <br><sub><code>Dynamic</code></sub></td><td>With TLS</td><td>Structure</td><td></td><td>Configures the TLS certs used by the operator when connecting to the Aerospike cluster. See <a href="#operator-client-cert">Operator Client Certs</a> for details.</td></tr><tr><td>validationPolicy  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>Configures the custom resource validation. See <a href="#validation-policy">Validation Policy</a> for details.</td></tr><tr><td>seedsFinderServices  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>creates additional Kubernetes service that allow clients to discover Aerospike cluster nodes. See <a href="#seeds-finder-services">Seeds Finder Services</a> for details.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="operator-client-cert"></a>Operator Client Cert<a class="hash-link" href="#operator-client-cert" title="Direct link to heading">#</a></h2><p>The operator needs to connect as an Aerospike client to perform management <code>asinfo</code> calls. If Aerospike service is configured to use TLS for clients, you need to specify the certificates that the client needs to use to make these info calls.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>tlsClientName</td><td>No</td><td>String</td><td></td><td>If specified, this name will be added to tls-authenticate-client list by the operator so that it will always to allowed by the Aerospike servers.</td></tr><tr><td>secretCertSource</td><td><code>*</code>Yes</td><td>Structure</td><td></td><td>The operator certs should be read from a secret. See <a href="#secret-cert-source">Secret Cert Source</a> for details.</td></tr><tr><td>certPathInOperator</td><td><code>*</code>Yes</td><td>Structure</td><td></td><td>The operator certs should be read from files mounted into the operator container. See <a href="#cert-path-in-operator-source">Cert Path In Operator Source</a> for details.</td></tr></tbody></table><p> <code>*</code> Exactly one for secretCertSource or certPathInOperator must be specified</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="secret-cert-source"></a>Secret Cert Source<a class="hash-link" href="#secret-cert-source" title="Direct link to heading">#</a></h3><p>Specifies that the certificate should be read from a Kubernetes Secret.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>secretName</td><td>Yes</td><td>String</td><td></td><td>The name of the secret.</td></tr><tr><td>secretNamespace</td><td>No</td><td>String</td><td>Operator&#x27;s namespace</td><td>The namespace containing the secret.</td></tr><tr><td>caCertsFilename</td><td>No</td><td>String</td><td></td><td>The name of the secret key /file containing the CA certificate.</td></tr><tr><td>clientCertFilename</td><td>No</td><td>String</td><td></td><td>The name of the secret key /file containing the operator&#x27;s certificate.</td></tr><tr><td>clientKeyFilename</td><td>No</td><td>String</td><td></td><td>The name of the secret key /file containing the operator&#x27;s secret key.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="cert-path-in-operator-source"></a>Cert Path In Operator Source<a class="hash-link" href="#cert-path-in-operator-source" title="Direct link to heading">#</a></h3><p>Specifies that the operator&#x27;s certificate are mounted onto the operator&#x27;s containers.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>caCertsPath</td><td>No</td><td>String</td><td></td><td>The path to the file containing the CA certificate.</td></tr><tr><td>clientCertPath</td><td>No</td><td>String</td><td></td><td>The path to the file containing the operator&#x27;s certificate.</td></tr><tr><td>clientKeyPath</td><td>No</td><td>String</td><td></td><td>The path to the file containing the operator&#x27;s secret key.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pod-spec"></a>Pod Spec<a class="hash-link" href="#pod-spec" title="Direct link to heading">#</a></h2><p>Configures the Kubernetes pod running Aerospike server.
Sidecar containers for monitoring, or running connectors can be added to each Aerospike pod.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>metadata</td><td>No</td><td>Structure</td><td></td><td>Kubernetes Annotations and Labels to add to pods. See <a href="#metadata">metadata</a> for details</td></tr><tr><td>multiPodPerHost</td><td>No</td><td>Boolean</td><td>False</td><td>Indicates if the operator should run multiple pods per Kubernetes cluster host.</td></tr><tr><td>affinity</td><td>No</td><td>Kubernetes Pod <a href="https://pkg.go.dev/k8s.io/api/core/v1#Affinity" target="_blank" rel="noopener noreferrer">Affinity</a></td><td></td><td>Kubernetes Affinity rules for pod placement. These rules will be merged with affinity rules generated by the operator.</td></tr><tr><td>tolerations</td><td>No</td><td>Kubernetes Pod <a href="https://pkg.go.dev/k8s.io/api/core/v1#toleration" target="_blank" rel="noopener noreferrer">Tolerations</a></td><td></td><td>Kubernetes Toleration for Aerospike pod placement</td></tr><tr><td>nodeSelector</td><td>No</td><td>Map from string to string</td><td></td><td><a href="https://v1-18.docs.kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector" target="_blank" rel="noopener noreferrer">Node selector</a> constraints for the Aerospike pods.</td></tr><tr><td>hostNetwork</td><td>No</td><td>Boolean</td><td>False</td><td>Enables host networking for the pod. To enable hostNetwork, <code>multiPodPerHost</code> must be false.</td></tr><tr><td>dnsPolicy</td><td>No</td><td>Kubernetes <a href="https://pkg.go.dev/k8s.io/api/core/v1#DNSPolicy" target="_blank" rel="noopener noreferrer">DNSPolicy</a></td><td></td><td><a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy" target="_blank" rel="noopener noreferrer">DnsPolicy</a> to use. If <code>hostNetwork</code> is true and policy is not specified, it defaults to ClusterFirstWithHostNet</td></tr><tr><td>aerospikeContainer</td><td>No</td><td>Structure</td><td></td><td>Configures the aerospike-server container created by operator. See <a href="#aerospike-container">Aerospike Container</a> for details.</td></tr><tr><td>sidecars</td><td>No</td><td>List of <a href="https://pkg.go.dev/k8s.io/api/core/v1#Container" target="_blank" rel="noopener noreferrer">Container</a> structures</td><td></td><td>List of side containers to run along with the main Aerospike server container. Volume mounts are not supported. See <a href="#storage">storage</a> for attaching volumes to sidecars.</td></tr><tr><td>initContainers</td><td>No</td><td>List of <a href="https://pkg.go.dev/k8s.io/api/core/v1#Container" target="_blank" rel="noopener noreferrer">Container</a> structures</td><td></td><td>List of init containers before running Aerospike and the sidecar containers.</td></tr></tbody></table><p>See <a href="/kubernetes-operator/next/Monitoring/">Monitoring</a> for details on configuring monitoring sidecars or Aerospike containers.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="metadata"></a>Metadata<a class="hash-link" href="#metadata" title="Direct link to heading">#</a></h3><p>Kubernetes annotations and labels to add to the pods.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>annotations</td><td>No</td><td>Map from annotation name to its value</td><td></td><td>Kubernetes Annotations</td></tr><tr><td>labels</td><td>No</td><td>Map from label name to its value</td><td></td><td>Kubernetes Labels</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aerospike-container"></a>Aerospike Container<a class="hash-link" href="#aerospike-container" title="Direct link to heading">#</a></h3><p>Configures the aerospike-server container created by operator.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>securityContext</td><td>No</td><td>Structure <a href="https://pkg.go.dev/k8s.io/api/core/v1#SecurityContext" target="_blank" rel="noopener noreferrer">SecurityContext</a></td><td></td><td>Kubernetes security context for the Aerospike container.</td></tr><tr><td>resources</td><td>No</td><td>Structure <a href="https://pkg.go.dev/k8s.io/api/core/v1#ResourceRequirements" target="_blank" rel="noopener noreferrer">ResourceRequirements</a></td><td></td><td>Configures resources requirements and limits like CPU or memory for the Aerospike container.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h2><p>The storage section configures persistent volumes devices to provision and attach to the containers.</p><p>This section is required by default for persisting the Aerospike <a href="https://docs.aerospike.com/docs/configuration/index.md?show-removed=1#work-directory" target="_blank" rel="noopener noreferrer">work directory</a>. The working directory should be stored on persistent storage to ensure pod restarts do not reset Aerospike server metadata files.</p><p>This section is also required if Aerospike namespaces require persistent storage.</p><p>The fields in this structure are described below.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>filesystemVolumePolicy     <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td><a href="#volume-policy">Volume policy</a> for filesystem volumes</td></tr><tr><td>blockVolumePolicy          <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td><a href="#volume-policy">Volume policy</a> for block volumes</td></tr><tr><td>Volumes                    <br><sub><code>Dynamic</code></sub></td><td>No</td><td>List of <a href="#volume">Volumes</a> Structures</td><td></td><td>List of <a href="#volume">Volumes</a> to attach to Aerospike pods. Persistent storage volumes cannot be added or removed dynamically.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="volume-policy"></a>Volume Policy<a class="hash-link" href="#volume-policy" title="Direct link to heading">#</a></h3><p>Specifies persistent volume policy to determine how new volumes are initialized.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>initMethod    <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Enum</td><td>none</td><td>Controls how the volumes are initialized when the persistent volume is attached the first time to a pod. Valid values are <code>none</code>, <code>dd</code>, <code>blkdiscard</code>, <code>deleteFiles</code></td></tr><tr><td>cascadeDelete <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Boolean</td><td>false</td><td>CascadeDelete determines if the persistent volumes are deleted after the pods these volumes binds to are terminated and removed from the cluster</td></tr></tbody></table><p>For filesystem volumes, initMethod can be <code>none</code> or <code>deleteFiles</code>.
For block volumes, initMethod can be <code>none</code>, <code>dd</code> or <code>blkdiscard</code>.</p><p>Note: <code>blkdiscard</code> will only work for devices that support <a href="https://en.wikipedia.org/wiki/Trim_%28computing%29" target="_blank" rel="noopener noreferrer">TRIM</a>. For AWS please refer to the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html#instance-store-volumes" target="_blank" rel="noopener noreferrer">storage volumes guide</a> to check TRIM support. If trim is not supported please use the slower <code>dd</code> in the case your devices need initialization. For other devices please verify the support for TRIM command.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="volume"></a>Volume<a class="hash-link" href="#volume" title="Direct link to heading">#</a></h3><p>Describes volumes to be created and attached to the init containers, main Aerospike container as well as other sidecars. </p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>Yes</td><td>String</td><td></td><td>A name identifying this volume, which must be unique among all created volumes.</td></tr><tr><td>source</td><td>Yes</td><td>Structure</td><td></td><td>Specifies the source for this volume. See <a href="#volume-source">Volume Source</a> for details</td></tr><tr><td>aerospike</td><td>No</td><td>Structure</td><td></td><td>Specifies how this volume is attached to the main Aerospike server container. See <a href="#aerospike-server-volume-attachment">AerospikeServerVolumeAttachment</a> for details.</td></tr><tr><td>sidecars</td><td>No</td><td>Structure</td><td></td><td>Attaches this volume to other sidecar containers. See <a href="#volume-attachment">Volume Attachment</a> for details.</td></tr><tr><td>initContainers</td><td>No</td><td>Structure</td><td></td><td>Attaches this volume to other init containers. See <a href="#volume-attachment">Volume Attachment</a> for details.</td></tr><tr><td>initMethod <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Enum</td><td>none</td><td>Controls how this volume is initialized when the persistent volume is attached the first time to a pod. Valid values are <code>none</code>, <code>dd</code>, <code>blkdiscard</code>, <code>deleteFiles</code></td></tr><tr><td>cascadeDelete  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Boolean</td><td>false</td><td>CascadeDelete determines if the persistent volume is deleted after the pod this volume binds to is terminated and removed from the cluster</td></tr></tbody></table><p>For filesystem volumes, initMethod can be <code>none</code> or <code>deleteFiles</code>.
For block volumes, initMethod can be <code>none</code>, <code>dd</code> or <code>blkdiscard</code>.</p><p>Note: <code>blkdiscard</code> will only work for devices that support <a href="https://en.wikipedia.org/wiki/Trim_%28computing%29" target="_blank" rel="noopener noreferrer">TRIM</a>. For AWS please refer to the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html#instance-store-volumes" target="_blank" rel="noopener noreferrer">storage volumes guide</a> to check TRIM support. If trim is not supported please use the slower <code>dd</code> in the case your devices need initialization. For other devices please verify the support for TRIM command.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="aerospike-server-volume-attachment"></a>Aerospike Server Volume Attachment<a class="hash-link" href="#aerospike-server-volume-attachment" title="Direct link to heading">#</a></h4><p>Specifies attaching a volume to the main Aerospike server container.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>path</td><td>Yes</td><td>String</td><td></td><td>The path to attach the volume to the Aerospike Container.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="volume-attachment"></a>Volume Attachment<a class="hash-link" href="#volume-attachment" title="Direct link to heading">#</a></h4><p>Specifies attaching a volume to a sidecar container.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>containerName</td><td>Yes</td><td>String</td><td></td><td>The name of the container to attach this volume to.</td></tr><tr><td>path</td><td>Yes</td><td>String</td><td></td><td>The path to attach the volume to the Aerospike Container.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="volume-source"></a>Volume Source<a class="hash-link" href="#volume-source" title="Direct link to heading">#</a></h4><p>A Volume source specifies the source for an attached volume. Volumes are created using a volume source that can be one of the following</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="persistent-volume"></a>Persistent Volume<a class="hash-link" href="#persistent-volume" title="Direct link to heading">#</a></h4><p>Specifies a persistent volume to claim and attach to Aerospike pods.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>storageClass</td><td>Yes</td><td>String</td><td></td><td>The name of the storage class to use.</td></tr><tr><td>volumeMode</td><td>Yes</td><td>Enum - Filesystem, Block</td><td></td><td>Specified the mode this volume should be created with. <code>Filesystem</code> creates a pre-formatted filesystem. Block mode creates a raw device.</td></tr><tr><td>size</td><td>Yes</td><td>String <a href="https://pkg.go.dev/k8s.io/apimachinery/pkg/api/resource#Quantity" target="_blank" rel="noopener noreferrer">Quantity</a></td><td></td><td>The device size to be provisioned. E.g. 5Gi</td></tr><tr><td>accessModes</td><td>No</td><td>List of <a href="https://pkg.go.dev/k8s.io/api/core/v1#PersistentVolumeAccessMode" target="_blank" rel="noopener noreferrer">PersistentVolumeAccessMode</a></td><td></td><td>Allowed access modes to the volume. E.g. ReadWriteOnce, ReadOnlyMany, ReadWriteMany</td></tr><tr><td>selector</td><td>No</td><td><a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors" target="_blank" rel="noopener noreferrer">LabelSelector</a></td><td></td><td>Only the volumes whose labels match the selector will be claimed.</td></tr><tr><td>initMethod <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Enum</td><td>none</td><td>Controls how this volume is initialized when the persistent volume is attached the first time to a pod. Valid values are <code>none</code>, <code>dd</code>, <code>blkdiscard</code>, <code>deleteFiles</code></td></tr><tr><td>cascadeDelete  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Boolean</td><td>false</td><td>CascadeDelete determines if the persistent volume is deleted after the pod this volume binds to is terminated and removed from the cluster</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="emptydir"></a>EmptyDir<a class="hash-link" href="#emptydir" title="Direct link to heading">#</a></h4><p><a href="https://v1-19.docs.kubernetes.io/docs/concepts/storage/volumes/#emptydir" target="_blank" rel="noopener noreferrer">EmptyDir</a> are volumes to be used as temporary working disk space.
See <a href="https://pkg.go.dev/k8s.io/api/core/v1#EmptyDirVolumeSource" target="_blank" rel="noopener noreferrer">EmptyDirVolumeSource</a> for options.</p><p>Example</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:white;background-color:#222734"><code class="codeBlockLines_39YC"><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tempFiles</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /opt/aerospike/temp</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">emptyDir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="secret"></a>Secret<a class="hash-link" href="#secret" title="Direct link to heading">#</a></h4><p>A Kubernetes <a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer">secret</a> can be mounted as a volume.
You can use a secret for mounting Aerospike licence file (features.conf) or sensitive files like TLS certificates and credentials onto the containers.</p><p>Example</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:white;background-color:#222734"><code class="codeBlockLines_39YC"><span class="token-line" style="color:white"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">            </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secret</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">aerospike</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /etc/aerospike/secret</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="configmap"></a>ConfigMap<a class="hash-link" href="#configmap" title="Direct link to heading">#</a></h4><p>A Kubernetes <a href="https://kubernetes.io/docs/concepts/configuration/configmap/" target="_blank" rel="noopener noreferrer">ConfigMap</a> can be mounter as  a volume.
A config map hold non-confidential data which could be configuration four applications running in your custom init-containers or sidecars.</p><p>Example</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:white;background-color:#222734"><code class="codeBlockLines_39YC"><span class="token-line" style="color:white"><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span></span><span class="token-line" style="color:white"><span class="token plain">    </span><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">      </span><span class="token key atrule">configMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># Provide the name of the ConfigMap you want to mount.</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># An optional array of keys from the ConfigMap to create as files</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;game.properties&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;game.properties&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user-interface.properties&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain">          </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;user-interface.properties&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:white"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="validation-policy"></a>Validation Policy<a class="hash-link" href="#validation-policy" title="Direct link to heading">#</a></h2><p>This section configures the policy for validating the cluster CR.</p><p>The fields in this structure are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>skipWorkDirValidate     <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Boolean</td><td>false</td><td>If true skips validating that the Aerospike work directory is stored on a persistent volume.</td></tr><tr><td>skipXdrDlogFileValidate <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Boolean</td><td>false</td><td>If true skips validating that the XDR digest log is stored on a persistent volume.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="network-policy"></a>Network Policy<a class="hash-link" href="#network-policy" title="Direct link to heading">#</a></h2><p>This section configures IP and port types used for access, alternate access, TLS access, and TLS alternate access endpoints on the Aerospike cluster.</p><p>Three types of endpoint configurations are supported.</p><ul><li>pod - uses the Kubernetes pod IP and Aerospike port that will work from other pods in the same Kubernetes cluster</li><li>hostInternal - uses the Kubernetes cluster node&#x27;s host IP and a mapped Aerospike port that will work from the VPC or internal network used by the Kubernetes cluster.</li><li>hostExternal - uses the Kubernetes cluster node&#x27;s host external/public IP and a mapped Aerospike port that should work even from outside the Kubernetes network.</li></ul><p>The fields in this structure are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>access     <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Enum [pod, hostInternal, hostExternal]</td><td>hostInternal</td><td>Configures Aerospike access endpoint.</td></tr><tr><td>alternateAccess     <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Enum [pod, hostInternal, hostExternal]</td><td>hostExternal</td><td>Configures Aerospike alternate access endpoint.</td></tr><tr><td>tlsAccess     <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Enum [pod, hostInternal, hostExternal]</td><td>hostInternal</td><td>Configures Aerospike TLS access endpoint.</td></tr><tr><td>tlsAlternateAccess     <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Enum [pod, hostInternal, hostExternal]</td><td>hostExternal</td><td>Configures Aerospike TLS alternate endpoint.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="aerospike-access-control"></a>Aerospike Access Control<a class="hash-link" href="#aerospike-access-control" title="Direct link to heading">#</a></h2><p>Provides Aerospike <a href="https://docs.aerospike.com/docs/configure/security/access-control/index.md" target="_blank" rel="noopener noreferrer">access control</a> configuration for the Aerospike cluster.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>roles  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>List of Structures</td><td></td><td>A list of <a href="#aerospike-role">Role</a> structures with an entry for each role.</td></tr><tr><td>users  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>List of Structures</td><td></td><td>A list of <a href="#aerospike-user">User</a> structures with an entry for each user. Required if Aerospike security is enabled.</td></tr></tbody></table><p>If the Aerospike cluster has security enabled an entry for the &quot;admin&quot; user having at least &quot;sys-admin&quot; and &quot;user-admin&quot; roles is mandatory.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aerospike-role"></a>Aerospike Role<a class="hash-link" href="#aerospike-role" title="Direct link to heading">#</a></h3><p>Configures roles to have in the Aerospike cluster.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>Yes</td><td>Strings</td><td></td><td>The name of this role.</td></tr><tr><td>privileges      <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>List of Strings</td><td></td><td>The privileges to grant this role.</td></tr><tr><td>whitelist      <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Whitelist of host address allowed for this role.</td><td></td><td></td></tr><tr><td>readQuota      <br><sub><code>Dynamic</code></sub></td><td>No</td><td>specifies permitted rate of read records for current role (the value is in RPS)</td><td></td><td></td></tr><tr><td>writeQuota      <br><sub><code>Dynamic</code></sub></td><td>No</td><td>specifies permitted rate of writes for current role (the value is in RPS)</td><td></td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="aerospike-user"></a>Aerospike User<a class="hash-link" href="#aerospike-user" title="Direct link to heading">#</a></h3><p>Configures users to have for the aerospike cluster.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>Yes</td><td>Strings</td><td></td><td>The name of this user.</td></tr><tr><td>secretName       <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>String</td><td></td><td>The name of the secret containing this user&#x27;s password.</td></tr><tr><td>roles            <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>List of Strings</td><td></td><td>The roles to grant to this user.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="aerospike-config-secret"></a>Aerospike Config Secret<a class="hash-link" href="#aerospike-config-secret" title="Direct link to heading">#</a></h2><p>Configures the name of the secret to use and the mount path to mount the secret files on the container.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>secretName  <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>String</td><td></td><td>The name of the secret</td></tr><tr><td>mountPath  <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>String</td><td></td><td>The path where the secret files will be mounted in the container.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="aerospike-config"></a>Aerospike Config<a class="hash-link" href="#aerospike-config" title="Direct link to heading">#</a></h2><p>The YAML form of Aerospike server configuration.
See <a href="/kubernetes-operator/next/Aerospike-configuration-mapping/">Aerospike Configuration</a> for details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="rack-config"></a>Rack Config<a class="hash-link" href="#rack-config" title="Direct link to heading">#</a></h2><p>Configures the operator to deploy rack aware Aerospike cluster. Pods will be deployed in given racks based on the given configuration.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>namespaces <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>List of Strings</td><td></td><td>List of Aerospike namespaces for which rack feature will be enabled.</td></tr><tr><td>racks <br><sub><code>Dynamic</code></sub></td><td>Yes</td><td>List of structures</td><td></td><td>List of <a href="#rack">racks</a></td></tr></tbody></table><p>See <a href="/kubernetes-operator/next/Rack-Awareness/">Rack awareness</a> for details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="rack"></a>Rack<a class="hash-link" href="#rack" title="Direct link to heading">#</a></h3><p>Rack specifies single rack config</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>Yes</td><td>Integer</td><td></td><td>Identifier for the rack.</td></tr><tr><td>zone</td><td>No</td><td>String</td><td></td><td>Zone name for setting rack affinity. Rack pods will be deployed to the given Zone.</td></tr><tr><td>region</td><td>No</td><td>String</td><td></td><td>Region name for setting rack affinity. Rack pods will be deployed to the given Region.</td></tr><tr><td>rackLabel</td><td>No</td><td>String</td><td></td><td>Rack label for setting rack affinity. Rack pods will be deployed in k8s nodes having rack label <code>aerospike.com/rack-label: &lt;rack-label&gt;</code>.</td></tr><tr><td>nodeName</td><td>No</td><td>String</td><td></td><td>K8s Node name for setting rack affinity. Rack pods will be deployed on the given k8s Node.</td></tr><tr><td>aerospikeConfig  <br><sub><code>Dynamic</code> <strong><code>Rolling restart</code></strong></sub></td><td>No</td><td>Structure</td><td></td><td>This local <a href="#aerospike-config">AerospikeConfig</a> is a patch, which will be merged recursively with common global AerospikeConfig and will be used for this Rack. See <a href="/kubernetes-operator/next/Rack-Awareness/#merging-aerospikeconfig">merging AerospikeConfig</a>. If this AerospikeConfig is not given then global AerospikeConfig will be used.</td></tr><tr><td>storage  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>This local <a href="#storage">Storage</a> specify persistent storage to use for the pods in this rack. If this Storage is not given then global Storage will be used.</td></tr><tr><td>podSpec  <br><sub><code>Dynamic</code></sub></td><td>No</td><td>Structure</td><td></td><td>Pod overrides for this rack. See <a href="#rack-pod-overrides">Rack Pod Overrides</a> for details.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rack-pod-overrides"></a>Rack Pod Overrides<a class="hash-link" href="#rack-pod-overrides" title="Direct link to heading">#</a></h4><p>Provides rack specific overrides to the <a href="#pod-spec">Pod spec</a>.</p><p>The following overrides are supported.</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>affinity</td><td>No</td><td>Kubernetes Pod <a href="https://pkg.go.dev/k8s.io/api/core/v1#Affinity" target="_blank" rel="noopener noreferrer">Affinity</a></td><td></td><td>Kubernetes Affinity rules for pod placement. These rules will be merged with affinity rules generated by the operator.</td></tr><tr><td>tolerations</td><td>No</td><td>Kubernetes Pod <a href="https://pkg.go.dev/k8s.io/api/core/v1#toleration" target="_blank" rel="noopener noreferrer">Tolerations</a></td><td></td><td>Kubernetes Toleration for Aerospike pod placement</td></tr><tr><td>nodeSelector</td><td>No</td><td>Map from string to string</td><td></td><td><a href="https://v1-18.docs.kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector" target="_blank" rel="noopener noreferrer">Node selector</a> constraints for the Aerospike pods.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="seeds-finder-services"></a>Seeds Finder Services<a class="hash-link" href="#seeds-finder-services" title="Direct link to heading">#</a></h2><p>Creates additional Kubernetes service that allow clients to discover Aerospike cluster nodes.</p><p>The fields are</p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>loadBalancer</td><td>No</td><td>Structure</td><td></td><td>Creates a load balancer service that allows Aerospike clients to discover Aerospike cluster nodes. See <a href="#load-balancer-service">#load balancer Service</a> for details.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="load-balancer-service"></a>Load balancer service<a class="hash-link" href="#load-balancer-service" title="Direct link to heading">#</a></h3><p>Creates a load balancer service that allows Aerospike clients to discover Aerospike cluster nodes. </p><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>externalTrafficPolicy</td><td>No</td><td>Enum - Local, Cluster</td><td></td><td>External Traffic Policy Type string. See <a href="https://pkg.go.dev/k8s.io/api/core/v1#ServiceExternalTrafficPolicyType" target="_blank" rel="noopener noreferrer">ServiceExternalTrafficPolicyType</a> for details.</td></tr><tr><td>annotations</td><td>No</td><td>Map from annotation name to its value</td><td></td><td>Kubernetes Annotations for the load balancer.</td></tr><tr><td>port</td><td>No</td><td></td><td></td><td>Exposed port on load balancer. If not specified targetPort is used.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="next"></a>Next<a class="hash-link" href="#next" title="Direct link to heading">#</a></h2><ul><li><a href="/kubernetes-operator/next/Scaling/">Scale up/down</a></li><li><a href="/kubernetes-operator/next/Version-upgrade/">Aerospike version upgrade/downgrade</a></li><li><a href="/kubernetes-operator/next/Aerospike-configuration-change/">Aerospike configuration change</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aerospike/kubernetes-operator/edit/main/docs/Cluster-configuration-settings.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kubernetes-operator/next/Limitations/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Limitations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kubernetes-operator/next/Aerospike-configuration-mapping/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Aerospike Configuration Mapping Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#custom-resource-definition-and-custom-resource" class="table-of-contents__link">Custom Resource Definition and Custom Resource</a></li><li><a href="#example-cr" class="table-of-contents__link">Example CR</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li><li><a href="#spec" class="table-of-contents__link">Spec</a></li><li><a href="#operator-client-cert" class="table-of-contents__link">Operator Client Cert</a><ul><li><a href="#secret-cert-source" class="table-of-contents__link">Secret Cert Source</a></li><li><a href="#cert-path-in-operator-source" class="table-of-contents__link">Cert Path In Operator Source</a></li></ul></li><li><a href="#pod-spec" class="table-of-contents__link">Pod Spec</a><ul><li><a href="#metadata" class="table-of-contents__link">Metadata</a></li><li><a href="#aerospike-container" class="table-of-contents__link">Aerospike Container</a></li></ul></li><li><a href="#storage" class="table-of-contents__link">Storage</a><ul><li><a href="#volume-policy" class="table-of-contents__link">Volume Policy</a></li><li><a href="#volume" class="table-of-contents__link">Volume</a></li></ul></li><li><a href="#validation-policy" class="table-of-contents__link">Validation Policy</a></li><li><a href="#network-policy" class="table-of-contents__link">Network Policy</a></li><li><a href="#aerospike-access-control" class="table-of-contents__link">Aerospike Access Control</a><ul><li><a href="#aerospike-role" class="table-of-contents__link">Aerospike Role</a></li><li><a href="#aerospike-user" class="table-of-contents__link">Aerospike User</a></li></ul></li><li><a href="#aerospike-config-secret" class="table-of-contents__link">Aerospike Config Secret</a></li><li><a href="#aerospike-config" class="table-of-contents__link">Aerospike Config</a></li><li><a href="#rack-config" class="table-of-contents__link">Rack Config</a><ul><li><a href="#rack" class="table-of-contents__link">Rack</a></li></ul></li><li><a href="#seeds-finder-services" class="table-of-contents__link">Seeds Finder Services</a><ul><li><a href="#load-balancer-service" class="table-of-contents__link">Load balancer service</a></li></ul></li><li><a href="#next" class="table-of-contents__link">Next</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/aerospike" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/aerospikedb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/kubernetes-operator/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/aerospike/aerospike-kubernetes-operator" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Aerospike</div></div></div></footer></div>
<script src="/kubernetes-operator/assets/js/runtime~main.0d978f0c.js"></script>
<script src="/kubernetes-operator/assets/js/main.0c3a2572.js"></script>
</body>
</html>